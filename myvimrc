set nocompatible              " be iMproved
"execute pathogen#infect()
"设置文件格式
set fileformats=unix,dos
"设置编码方式
set encoding=utf-8
set fenc=utf-8
set fileencodings=utf-8,cp936,ucs-bom
syntax on
"设置缩进
set shiftwidth=4 softtabstop=4 tabstop=4
set expandtab
"设置注释
set autoindent 
set smartindent shiftround
"显示行号
set number
"设置状态显示
set laststatus=2
"命令回显
set showcmd
set ruler
"filetype off                  " required!
"设置搜索
set hlsearch
set ignorecase
set incsearch
nmap <silent> <BS> :nohlsearch<CR>
"设置颜色主题
syntax enable
set background=dark
colorscheme solarized
"禁用方向键
map <up> <nop>
map <down> <nop>
map <left> <nop>
map <right> <nop>
"搜索时正则表达式
nnoremap / /\v
"打开文件回到上次关闭的位置
au BufReadPost * if line("'\"") > 0|if line("'\"") <= line("$")|exe("norm '\"")|else|exe "norm $"|endif|endif
"增加%命令支持的配对
set matchpairs+=<:>
"移动出当前行
set whichwrap+=<,>,h,l,[,] " Wrap arrow keys between lines

"读入c/cpp/java文件时自动打开Taglist
"autocmd BufReadPost *.h,*.c,*.cpp,*.java exe(":Tlist")
"set cursorcolumn
set cursorline

set rtp+=~/.vim/bundle/Vundle.vim
call vundle#begin()

let mapleader = ','
"分屏窗口切换改键
noremap <C-h> <C-w>h
noremap <C-j> <C-w>j
noremap <C-k> <C-w>k
noremap <C-l> <C-w>l
"重新加载vimrc
noremap <silent> <leader>V :source ~/.vimrc<CR>:filetype detect<CR>:exe ":echo 'vimrc reloaded'"<CR>

" md is markdown
autocmd BufRead,BufNewFile *.md set filetype=markdown
autocmd BufRead,BufNewFile *.md set spell
" automatically rebalance windows on vim resize
autocmd VimResized * :wincmd =

" scala
autocmd BufRead,BufNewFile *.scala set filetype=scala

" let Vundle manage Vundle
" required! 
Plugin 'gmarik/vundle'

" My bundles here:
"
" original repos on GitHub
Plugin 'tpope/vim-fugitive'
Plugin 'Lokaltog/vim-easymotion'
Plugin 'rstacruz/sparkup', {'rtp': 'vim/'}
Plugin 'tpope/vim-rails.git'
Plugin 'tpope/vim-commentary.git'
" vim-scripts repos
Plugin 'L9'
Plugin 'FuzzyFinder'
Plugin 'godlygeek/tabular'
"Plugin 'plasticboy/vim-markdown.git' 
" non-GitHub repos
""""""""git repo"""""""""""""""
Plugin 'wincent/command-t'
Plugin 'scrooloose/nerdtree'
Plugin 'Valloric/YouCompleteMe'
"Plugin 'vim-scripts/AutoClose'
Plugin 'scrooloose/syntastic'
Plugin 'Lokaltog/vim-powerline'
Plugin 'altercation/vim-colors-solarized'

" All of your Plugins must be added before the following line
call vundle#end()
filetype plugin indent on     " required!

""""""""""""YCM""""""""""""""""""""
"configuration file
let g:ycm_global_ycm_extra_conf = '~/.vim/bundle/YouCompleteMe/third_party/ycmd/cpp/ycm/.ycm_extra_conf.py'
let g:ycm_collect_identifiers_from_tags_files = 1
let g:ycm_seed_identifiers_with_syntax = 1
let g:ycm_confirm_extra_conf = 0
"This option controls for which Vim filetypes should YCM be turned on
let g:ycm_filetype_whitelist = { '*': 1 }
"This option controls for which Vim filetypes should YCM be turned off
let g:ycm_filetype_blacklist = {
      \ 'tagbar' : 1,
      \ 'qf' : 1,
      \ 'notes' : 1,
      \ 'markdown' : 1,
      \ 'unite' : 1,
      \ 'text' : 1,
      \ 'vimwiki' : 1,
      \ 'pandoc' : 1,
      \ 'infolog' : 1,
      \ 'mail' : 1
      \}
nnoremap <C-i> : YcmCompleter GoTo<CR>
nnoremap <F5> : YcmForceCompileAndDiagnostics<CR><CR>


"""""""""""syntastic""""""""""""
let g:syntastic_check_on_open = 1
let g:syntastic_cpp_include_dirs = ['/usr/include/']
let g:syntastic_cpp_remove_include_errors = 1
let g:syntastic_cpp_check_header = 1
let g:syntastic_cpp_compiler = 'clang++'
let g:syntastic_cpp_compiler_options = '-std=c++11 -stdlib=libstdc++'
"set error or warning signs
let g:syntastic_error_symbol = '✗'
let g:syntastic_warning_symbol = '⚠'
""whether to show balloons
let g:syntastic_enable_balloons = 1
nnoremap <F5> :YcmForceCompileAndDiagnostics<CR><CR>
""""""""""""FuzzyFinder""""""""""""""""""""
nnoremap <leader>f :FufCoverageFile!<CR>
let g:fuf_coveragefile_exclude = '\v\~$|\.(o|exe|dll|bak|orig|swp)$|(^|[/\\])\.(hg|git|bzr)($|[/\\])|.(svg|png|s|dot)$'
let g:fuf_coveragefile_prompt = '=>'

"""""""""""NERDTree""""""""""""
"切换显示NERDtree
nnoremap <leader>d :NERDTreeToggle<CR>

""""""""""""Taglist""""""""""""""""""""
"let Tlist_Show_One_File = 1         "只显示当前文件的taglist，默认是显示多个
"let Tlist_Exit_OnlyWindow = 1          "如果taglist是最后一个窗口，则退出vim
"let Tlist_Use_Right_Window = 0         "在左侧窗口中显示taglist
""let Tlist_Auto_Open = 0         "在启动VIM后自动打开taglist窗口
"let Tlist_GainFocus_On_ToggleOpen = 1  "打开taglist时，光标保留在taglist窗口
"let Tlist_Ctags_Cmd='/usr/bin/ctags'  "设置ctags命令的位置
"nnoremap <leader>tl : Tlist<CR>        "设置关闭和打开taglist窗口的快捷键

nnoremap <leader>a :echo expand('%:p')<CR>

autocmd FileType c,cpp,cs,java          setlocal commentstring=//\ %s
